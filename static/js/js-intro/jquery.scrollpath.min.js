/* jQuery Scroll Path Plugin by Joel Besada (http://joelb.me/scrollpath). Version 1.1.1. MIT LICENSED */
(function(h,D,r,M){function Q(a,b){function E(a,b){m=Math.min(a,m);f=Math.min(b,f);e=Math.max(a,e);d=Math.max(b,d)}var y=0,z=0,c=0,e=0,d=0,m=0,f=0,s=[{method:"moveTo",args:[0,0]}],q=[],n={},k={rotate:null,callback:null,name:null};this.rotate=function(a,E){var o=h.extend({},k,E),g=Math.abs(a-c),g=Math.round(g/b)*j,e=(a-c)/g,d=1;if(!H)return(o.name||o.callback)&&this.moveTo(y,z,{callback:o.callback,name:o.name}),this;for(;d<=g;d++)q.push({x:y,y:z,rotate:c+e*d,callback:d===g?o.callback:null});o.name&&
(n[o.name]=q.length-1);c=a%(2*Math.PI);return this};this.moveTo=function(a,b,o){var g=h.extend({},k,o),e=q.length?j:1;for(i=0;i<e;i++)q.push({x:a,y:b,rotate:null!==g.rotate?g.rotate:c,callback:i===e-1?g.callback:null});g.name&&(n[g.name]=q.length-1);y=a;z=b;E(a,b);s.push({method:"moveTo",args:arguments});return this};this.lineTo=function(b,e,o){for(var g=h.extend({},k,o),d=b-y,f=e-z,t=Math.sqrt(d*d+f*f),t=Math.round(t/a)*j,d=d/t,f=f/t,u=null!==g.rotate&&H,m=u?(g.rotate-c)/t:0,v=1;v<=t;v++)q.push({x:y+
d*v,y:z+f*v,rotate:c+m*v,callback:v===t?g.callback:null});g.name&&(n[g.name]=q.length-1);c=u?g.rotate:c;y=b;z=e;E(b,e);s.push({method:"lineTo",args:arguments});return this};this.arc=function(b,e,d,g,f,m,t){var u=h.extend({},k,t),x=b+Math.cos(g)*d,v=e+Math.sin(g)*d,r=b+Math.cos(f)*d,C=e+Math.sin(f)*d,w,B=g;w=f;var l=m,F=I(B),p=I(w),A=Math.abs(F-p),D=2*Math.PI-A;w=l&&F<p||!l&&F>p||F===p&&B!==w?D:A;B=Math.round(d*w/a)*j;w=w/B*(m?-1:1);F=(l=null!==u.rotate&&H)?(u.rotate-c)/B:0;p=1;for((y!==x||z!==v)&&
this.lineTo(x,v);p<=B;p++)q.push({x:b+d*Math.cos(g+w*p),y:e+d*Math.sin(g+w*p),rotate:c+F*p,callback:p===B?u.callback:null});u.name&&(n[u.name]=q.length-1);c=l?u.rotate:c;y=r;z=C;E(b+d,e+d);E(b-d,e-d);s.push({method:"arc",args:arguments});return this};this.getPath=function(){return q};this.getNameMap=function(){return n};this.getCanvasPath=function(){for(var a=0;a<s.length;a++)s[a].args[0]-=this.getPathOffsetX(),s[a].args[1]-=this.getPathOffsetY();return s};this.getPathWidth=function(){return e-m+
40};this.getPathHeight=function(){return d-f+40};this.getPathOffsetX=function(){return m-20};this.getPathOffsetY=function(){return f-20}}function R(){C.scrollBar&&(f=h("<div>").addClass("sp-scroll-bar").on("click",function(a){var b=Math.round(a.offsetY/f.height()*(c.length-1));5<Math.abs(b-e)&&(b=e+5*j*(b>e?1:-1));n(b);a.preventDefault();return!1}),l=h("<div>").addClass("sp-scroll-handle").on({click:function(a){a.preventDefault();return!1},mousedown:function(a){if(0===a.button)return J=!0,a.preventDefault(),
!1}}),h(r).on({mouseup:function(){J=!1},mousemove:function(a){if(J){var a=a.clientY-f.offset().top,a=Math.round(a/f.height()*(c.length-1)),b=c.length-1,a=a>b?b:0>a?0:a,b=a%j;n(b>j/2?a+j-b:a-b)}}}),h("body").prepend(f.append(l)))}function S(){if(C.drawPath&&T){var a;a={position:"absolute","z-index":9998,left:d.getPathOffsetX(),top:d.getPathOffsetY(),"pointer-events":"none"};a[k+"user-select"]=a["user-select"]="none";a[k+"user-drag"]=a["user-drag"]="none";a=h("<canvas>").addClass("sp-canvas").css(a).prependTo(G);
a[0].width=d.getPathWidth();a[0].height=d.getPathHeight();a=a[0].getContext("2d");var b=d.getCanvasPath(),c=0;a.shadowBlur=15;a.shadowColor="black";a.strokeStyle="white";a.lineJoin="round";a.lineCap="round";for(a.lineWidth=10;c<b.length;c++)a[b[c].method].apply(a,b[c].args);a.stroke()}}function N(a){var b=a.originalEvent.wheelDelta||-a.originalEvent.detail,b=b/Math.abs(b);a.preventDefault();h(D).scrollTop(0).scrollLeft(0);A(-b*j)}function U(a){if(!/^text/.test(a.target.type))switch(a.keyCode){case 40:A(j);
break;case 38:A(-j);break;case 32:A(5*j*(a.shiftKey?-1:1))}}function A(a){n(O(e+a))}function V(a,b,c,d){if(!(0===a||x)){if(!b||"number"!==typeof b)return"function"===typeof b&&b(),A(a);x=!0;var f=b/1E3*W,j=e,k=0,l,m,r=setInterval(function(){l=Math.round((h.easing[c]||h.easing.swing)(++k/f,b/f*k,0,a,b));m=O(j+l);k===f&&(clearInterval(r),"function"===typeof c?c():d&&d(),x=!1);n(m,!0)},b/f)}}function n(a,b){if(!x||b){var d=c[a].callback;G.css(X(c[a]));l&&l.css("top",a/(c.length-1)*(f.height()-l.height())+
"px");d&&a!==e&&!x&&d();e=a}}function O(a){if(C.wrapAround)if(x){for(;0>a;)a+=c.length;for(;a>=c.length;)a-=c.length}else 0>a&&(a=c.length-1),a>=c.length&&(a=0);else a=a>c.length-1?c.length-1:0>a?0:a;return a}function X(a){var b=a.x-h(D).width()/2,d=a.y-h(D).height()/2,c={};0===I(a.rotate)?(c.left=-b,c.top=-d,c[k+"transform-origin"]=c["transform-origin"]="",c[k+"transform"]=c.transform=""):(c.left=c.top="",c[k+"transform-origin"]=c["transform-origin"]=a.x+"px "+a.y+"px",c[k+"transform"]=c.transform=
"translate("+-b+"px, "+-d+"px) rotate("+a.rotate+"rad)");return c}function I(a){for(;0>a;)a+=2*Math.PI;return a%(2*Math.PI)}var k="-"+function(){var a=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,b=r.getElementsByTagName("script")[0],c;for(c in b.style)if(a.test(c))return c.match(a)[0];return"WebkitOpacity"in b.style?"Webkit":"KhtmlOpacity"in b.style?"Khtml":""}().toLowerCase()+"-",H=function(){for(var a=r.createElement("dummy").style,b="transform,WebkitTransform,MozTransform,OTransform,msTransform,KhtmlTransform".split(","),
c=0;c<b.length;c++)if(a[b[c]]!==M)return!0;return!1}(),T=!!r.createElement("canvas").getContext,W=30,j=10,P=!1,J=!1,x=!1,e,d,c,G,f,l,K={scrollSpeed:50,rotationSpeed:Math.PI/15},C={wrapAround:!1,drawPath:!1,scrollBar:!0},L={init:function(a){(1<this.length||P)&&h.error("jQuery.scrollPath can only initialized on *one* element *once*");h.extend(C,a);P=!0;G=this;c=d.getPath();S();R();n(0);G.css("position","relative");h(r).on({mousewheel:N,DOMMouseScroll:N,keydown:U,mousedown:function(a){if(1===a.button)return a.preventDefault(),
!1}});h(D).on("resize",function(){n(e)});return this},getPath:function(a){h.extend(K,a);return d||(d=new Q(K.scrollSpeed,K.rotationSpeed))},scrollTo:function(a,b,f,k){var j=d.getNameMap()[a];j===M&&h.error("jQuery.scrollPath could not find scroll target with name '"+a+"'");a=j-e;C.wrapAround&&Math.abs(a)>c.length/2&&(a=j>e?-e-c.length+j:c.length-e+j);V(a,b,f,k);return this}};h.fn.scrollPath=function(a){if(L[a])return L[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||
!a)return L.init.apply(this,arguments);h.error("Method "+a+" does not exist on jQuery.scrollPath")}})(jQuery,window,document);